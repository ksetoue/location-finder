!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=require("express")},function(e,t,n){const o=n(2),r=n(0),s=n(3),i=n(4),u=n(5),l=r();r.Router(),o.config();const a=process.env.PORT||8080;l.use(s.urlencoded({extended:!0})),l.use(s.json()),l.use("*",i()),l.use("/places",u),l.listen(a,function(){console.log(`App listening on port ${a}`)})},function(e,t){e.exports=require("dotenv")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("cors")},function(e,t,n){const o=n(0),r=n(6),s=o.Router();s.post("/search",r.getLocations),e.exports=s},function(e,t,n){n(7);const o=n(9),r=n(13);let s={};function i(e){if(!e.near)return null;let t={};return t.id=e.id,t.name=e.name,t.lat=e.lat,t.long=e.long,t}s.getLocations=(e,t)=>{let n=e.body;if(!n||n.length<50)return t.status(400).json("Payload must contain more than 50 items.");if(n.length>100)return t.status(413).json("Payload must contain less than 100 items.");let s=n.map(e=>o.searchPlaces(e));Promise.all(s).then(e=>{let n=[],o=[];for(let t of e)t.id?n.push(t):o.push(t);let s=r.getDistances(n);t.status(200).json(function(e){let t=[];return e.forEach(e=>{let n={location1:i(e),location2:i(e.near)};t.push(n)}),t}(s))}).catch(e=>t.status(500).json(e))},e.exports=s},function(e,t,n){const o=n(8);e.exports=function(){return JSON.parse(o.readFileSync("./mock.txt").toString())}},function(e,t){e.exports=require("fs")},function(e,t,n){const o=n(10),r=n(11);n(12);const s=o.createClient({key:`${process.env.GOOGLE_PLACES_API_KEY}`,Promise:Promise});let i={};i.searchPlaces=e=>s.places({query:`${e}`}).asPromise().then((e=>t=>{let n=t.json.results[0];return new r(n?{name:e,id:n.id,lat:n.geometry.location.lat,long:n.geometry.location.lng,address:n.formatted_address}:{name:e})})(e)),e.exports=i},function(e,t){e.exports=require("@google/maps")},function(e,t){e.exports=class{constructor({id:e,name:t,lat:n,long:o,address:r}){this.id=e,this.name=t,this.lat=n,this.long=o,this.addess=r,this.near=null}}},function(e,t){e.exports=require("dotenv/config")},function(e,t){let n={};function o(e,t,n,o){let r=n-e,s=o-t;return Math.sqrt(r**2+s**2)}n.getDistances=e=>{if(!e)return console.log("not locations"),[];for(let t=0;t<e.length;t++){let n=1/0;for(let r=0;r<e.length;r++){if(t==r||e[t].name==e[r].name)continue;let s=o(e[t].lat,e[t].long,e[r].lat,e[r].long);s>=n||(n=s,e[t].near=e[r])}}return e},e.exports=n}]);